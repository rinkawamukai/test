<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tabs</title>
  <link rel="stylesheet" href="./index.css" />
</head>

<body>



<header class="tabbar" role="tablist" aria-label="ビュー切替">
  <button class="tab is-active" role="tab" aria-selected="true" data-target="gallery">ギャラリー</button>
  <button class="tab" role="tab" aria-selected="false" data-target="time">ログ</button>
</header>

<main class="main">
  <!-- 2枚のiframeを最初から読み込んでおく -->
  <iframe id="view-time" class="view-frame" title="ログ" src="time.html"></iframe>
  <iframe id="view-gallery" class="view-frame is-active" title="ギャラリー" src="gallery.html"></iframe>
</main>

<script>
  (function() {
    const tabs = [...document.querySelectorAll('.tabbar .tab')];
    const frames = {
      gallery: document.getElementById('view-gallery'),
      time: document.getElementById('view-time'),
    };

    function setActive(name) {
      // 表示切替（srcは触らない = 再読込しない）
      Object.entries(frames).forEach(([key, el]) => {
        el.classList.toggle('is-active', key === name);
      });
      tabs.forEach(btn => {
        const active = btn.dataset.target === name;
        btn.classList.toggle('is-active', active);
        btn.setAttribute('aria-selected', active ? 'true' : 'false');
      });
      history.replaceState(null, '', '#' + name);
    }

    tabs.forEach(btn => {
      btn.addEventListener('click', () => setActive(btn.dataset.target));
    });

    const h = (location.hash || '#time').replace('#','');
    setActive(h === 'gallery' ? 'gallery' : 'time');
  })();
</script>

</body>


</html>


